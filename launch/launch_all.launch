<?xml version="1.0"?>
<launch>

	<!-- <rosparam command="load" file="$(find simple_navigation_goals)/config/red_rover_config.yaml" /> -->

	<arg name="REACH_IP" value="$(env REACH_IP)" />
	<arg name="REACH_SERIAL_PORT" value="$(env REACH_SERIAL_PORT)" />
	<arg name="REACH_BAUD" value="$(env REACH_BAUD)" />
	<arg name="REACH_HTTP_PORT" value="$(optenv REACH_HTTP_PORT 80)" />
	<arg name="ARDUINO_SERIAL_PORT" value="$(env ARDUINO_SERIAL_PORT)" />
	<arg name="ARDUINO_BAUD" value="$(env ARDUINO_BAUD)" />
	<arg name="FLAG_FILE" value="$(env FLAG_FILE)" />



	<!-- Launches arduino ROS node -->
	<!-- <node pkg="rosserial_python" name="arduino_node" type="serial_node.py" output="screen"> -->
		<!-- <param name="port" value="$(arg ARDUINO_SERIAL_PORT)" /> -->
		<!-- <param name="baud" value="$(arg ARDUINO_BAUD)" /> -->
	<!-- </node> -->

	<!-- Launches emlid_socketio_client.py file TODO: Convert to ROS service or node -->
	<node pkg="simple_navigation_goals" name="emlid_socketio_client" type="emlid_socketio_client.py" output="screen" args="$(arg REACH_IP) $(arg REACH_HTTP_PORT)" />
	
	<!-- Launches file for rosbridge server -->
	<include file="$(find rosbridge_server)/launch/rosbridge_websocket.launch" />

	<!-- Node to read data from reach via serial -->
	<node pkg="nmea_navsat_driver" type="nmea_serial_driver" name="reach_nmea_driver" respawn="true">
		<param name="port" value="$(arg REACH_SERIAL_PORT)" />
		<param name="baud" value="$(arg REACH_BAUD)" />
	</node>

	<!-- Launches IMU launch file -->
	<include file="$(find simple_navigation_goals)/launch/imu.launch" ns="phidget" />

	<!-- Launches jackal position service -->
	<node pkg="simple_navigation_goals" name="jackal_pos_server" type="jackal_pos_server.py" output="screen" />

	<!-- Launches jackal rotation service -->
	<node pkg="simple_navigation_goals" name="jackal_rot_server" type="jackal_rot_server.py" output="screen" />

	<!-- Launches jackal_flags_node.py -->
	<!-- <node pkg="simple_navigation_goals" name="jackal_flags_node" type="jackal_flags_node.py" output="screen" args="$(arg FLAG_FILE)" />	 -->

	

</launch>
